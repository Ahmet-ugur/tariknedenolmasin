<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>❤️ Sevgili Olmamız İçin Geri Sayım ❤️</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", sans-serif;
        background: linear-gradient(
          135deg,
          #ff69b4 0%,
          #ff1493 25%,
          #ff69b4 50%,
          #ffb6c1 75%,
          #ff69b4 100%
        );
        background-size: 400% 400%;
        animation: gradientShift 15s ease infinite;
        color: #fff;
        min-height: 100vh;
        overflow-x: hidden;
        position: relative;
      }

      @keyframes gradientShift {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        position: relative;
        z-index: 2;
      }

      /* Floating Elements */
      .floating {
        position: fixed;
        font-size: 20px;
        animation: float 20s linear infinite;
        opacity: 0.8;
        z-index: 1;
        filter: drop-shadow(2px 2px 8px rgba(0, 0, 0, 0.3));
        pointer-events: none;
      }

      .floating:nth-child(odd) {
        animation-duration: 25s;
        animation-delay: -5s;
      }

      .floating:nth-child(3n) {
        animation-duration: 30s;
        animation-delay: -10s;
      }

      .floating:nth-child(4n) {
        animation-duration: 35s;
        animation-delay: -15s;
      }

      @keyframes float {
        0% {
          transform: translateY(100vh) rotate(0deg) scale(0.5);
          opacity: 0;
        }
        10% {
          opacity: 0.8;
        }
        90% {
          opacity: 0.8;
        }
        100% {
          transform: translateY(-10vh) rotate(720deg) scale(1.5);
          opacity: 0;
        }
      }

      /* Header */
      .header {
        text-align: center;
        margin-bottom: 60px;
        padding: 40px 0;
      }

      .main-title {
        font-family: "Dancing Script", cursive;
        font-size: 4rem;
        font-weight: 700;
        text-align: center;
        margin-bottom: 30px;
        line-height: 1.2;
        text-shadow: 3px 3px 12px rgba(0, 0, 0, 0.4);
        letter-spacing: 2px;
        background: linear-gradient(45deg, #fff, #ffe6f2, #fff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: titleGlow 3s ease-in-out infinite alternate;
      }

      @keyframes titleGlow {
        from {
          filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.8));
        }
        to {
          filter: drop-shadow(0 0 30px rgba(255, 255, 255, 1));
        }
      }

      .subtitle {
        font-size: 1.6rem;
        font-weight: 400;
        text-align: center;
        margin-bottom: 20px;
        text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);
        opacity: 0.95;
        font-family: "Playfair Display", serif;
      }

      /* Countdown Section */
      .countdown-section {
        text-align: center;
        margin-bottom: 80px;
        padding: 40px;
        background: rgba(255, 255, 255, 0.15);
        border-radius: 30px;
        backdrop-filter: blur(20px);
        border: 2px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0 20px 60px rgba(255, 105, 180, 0.3);
      }

      .countdown-title {
        font-size: 1.8rem;
        font-weight: 600;
        margin-bottom: 40px;
        text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);
        font-family: "Playfair Display", serif;
      }

      .countdown {
        display: flex;
        gap: 20px;
        justify-content: center;
        flex-wrap: wrap;
        margin: 0 auto;
        max-width: 600px;
      }

      .unit {
        background: linear-gradient(
          145deg,
          rgba(255, 105, 180, 0.8),
          rgba(255, 20, 147, 0.6)
        );
        border: 3px solid rgba(255, 255, 255, 0.4);
        border-radius: 25px;
        padding: 30px 25px;
        min-width: 120px;
        text-align: center;
        backdrop-filter: blur(15px);
        box-shadow: 0 15px 40px rgba(255, 105, 180, 0.4);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .unit::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.3),
          transparent
        );
        transition: left 0.5s;
      }

      .unit:hover::before {
        left: 100%;
      }

      .unit:hover {
        transform: translateY(-10px);
        box-shadow: 0 25px 60px rgba(255, 105, 180, 0.6);
      }

      .label {
        font-size: 18px;
        color: #fff;
        text-transform: uppercase;
        margin-bottom: 15px;
        font-weight: 600;
        letter-spacing: 1px;
        text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.3);
        font-family: "Inter", sans-serif;
      }

      .value {
        font-size: 48px;
        font-weight: 700;
        text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);
        color: #fff;
        font-family: "Inter", sans-serif;
      }

      /* Map Section */
      .map-section {
        margin-bottom: 80px;
        text-align: center;
      }

      .map-title {
        font-size: 2rem;
        font-weight: 600;
        margin-bottom: 30px;
        text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);
        font-family: "Playfair Display", serif;
      }

      .map-container {
        background: rgba(255, 255, 255, 0.15);
        border-radius: 25px;
        padding: 20px;
        backdrop-filter: blur(20px);
        border: 2px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0 20px 60px rgba(255, 105, 180, 0.3);
      }

      #map {
        width: 100%;
        height: 500px;
        border-radius: 20px;
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
        border: 3px solid rgba(255, 255, 255, 0.4);
      }

      /* Footer */
      .footer {
        text-align: center;
        padding: 40px;
        background: rgba(255, 255, 255, 0.15);
        border-radius: 25px;
        backdrop-filter: blur(20px);
        border: 2px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0 20px 60px rgba(255, 105, 180, 0.3);
      }

      .contact-info {
        font-size: 1.4rem;
        font-weight: 500;
        margin-bottom: 20px;
        text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);
        font-family: "Playfair Display", serif;
      }

      .contact-link {
        color: #fff;
        text-decoration: none;
        font-weight: 600;
        font-size: 1.6rem;
        padding: 15px 30px;
        background: linear-gradient(
          145deg,
          rgba(255, 105, 180, 0.8),
          rgba(255, 20, 147, 0.6)
        );
        border-radius: 50px;
        border: 2px solid rgba(255, 255, 255, 0.4);
        transition: all 0.3s ease;
        display: inline-block;
        text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.3);
        font-family: "Inter", sans-serif;
      }

      .contact-link:hover {
        transform: translateY(-3px);
        box-shadow: 0 15px 40px rgba(255, 105, 180, 0.6);
        background: linear-gradient(
          145deg,
          rgba(255, 20, 147, 0.9),
          rgba(255, 105, 180, 0.8)
        );
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .container {
          padding: 15px;
        }

        .main-title {
          font-size: 2.5rem;
          letter-spacing: 1px;
          margin-bottom: 20px;
        }

        .subtitle {
          font-size: 1.3rem;
        }

        .header {
          margin-bottom: 40px;
          padding: 20px 0;
        }

        .countdown-section {
          margin-bottom: 50px;
          padding: 25px 20px;
        }

        .countdown-title {
          font-size: 1.5rem;
          margin-bottom: 25px;
        }

        .countdown {
          gap: 12px;
        }

        .unit {
          min-width: 90px;
          padding: 20px 15px;
        }

        .label {
          font-size: 14px;
          margin-bottom: 10px;
        }

        .value {
          font-size: 32px;
        }

        .map-section {
          margin-bottom: 50px;
        }

        .map-title {
          font-size: 1.6rem;
          margin-bottom: 20px;
        }

        #map {
          height: 350px;
        }

        .footer {
          padding: 25px 20px;
        }

        .contact-info {
          font-size: 1.2rem;
        }

        .contact-link {
          font-size: 1.3rem;
          padding: 12px 25px;
        }
      }

      @media (max-width: 480px) {
        .container {
          padding: 10px;
        }

        .main-title {
          font-size: 1.8rem;
          letter-spacing: 0.5px;
        }

        .subtitle {
          font-size: 1.1rem;
        }

        .header {
          margin-bottom: 30px;
          padding: 15px 0;
        }

        .countdown-section {
          margin-bottom: 40px;
          padding: 20px 15px;
          border-radius: 20px;
        }

        .countdown-title {
          font-size: 1.3rem;
          margin-bottom: 20px;
        }

        .countdown {
          gap: 8px;
        }

        .unit {
          min-width: 70px;
          padding: 15px 10px;
          border-radius: 20px;
        }

        .label {
          font-size: 12px;
          margin-bottom: 8px;
        }

        .value {
          font-size: 24px;
        }

        .map-section {
          margin-bottom: 40px;
        }

        .map-title {
          font-size: 1.4rem;
          margin-bottom: 15px;
        }

        #map {
          height: 300px;
        }

        .footer {
          padding: 20px 15px;
          border-radius: 20px;
        }

        .contact-info {
          font-size: 1.1rem;
        }

        .contact-link {
          font-size: 1.2rem;
          padding: 10px 20px;
        }
      }

      @media (max-width: 360px) {
        .main-title {
          font-size: 1.6rem;
        }

        .subtitle {
          font-size: 1rem;
        }

        .countdown {
          gap: 6px;
        }

        .unit {
          min-width: 60px;
          padding: 12px 8px;
        }

        .value {
          font-size: 20px;
        }

        .label {
          font-size: 10px;
        }

        #map {
          height: 250px;
        }

        /* Mobilde floating elementleri azalt */
        .floating {
          font-size: 16px;
        }

        .floating:nth-child(odd) {
          display: none;
        }

        .floating:nth-child(3n) {
          display: none;
        }
      }

      /* Music Player */
      .music-player {
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50px;
        padding: 15px 20px;
        backdrop-filter: blur(20px);
        border: 2px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0 10px 30px rgba(255, 105, 180, 0.4);
        z-index: 1000;
        display: flex;
        align-items: center;
        gap: 15px;
        transition: all 0.3s ease;
      }

      .music-player:hover {
        transform: scale(1.05);
        box-shadow: 0 15px 40px rgba(255, 105, 180, 0.6);
      }

      .music-controls {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .music-btn {
        background: none;
        border: none;
        color: #fff;
        font-size: 24px;
        cursor: pointer;
        padding: 5px;
        border-radius: 50%;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
      }

      .music-btn:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: scale(1.1);
      }

      .music-btn.playing {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
        }
      }

      .volume-control {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .volume-slider {
        width: 60px;
        height: 4px;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 2px;
        outline: none;
        cursor: pointer;
      }

      .volume-slider::-webkit-slider-thumb {
        appearance: none;
        width: 16px;
        height: 16px;
        background: #fff;
        border-radius: 50%;
        cursor: pointer;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
      }

      .volume-slider::-moz-range-thumb {
        width: 16px;
        height: 16px;
        background: #fff;
        border-radius: 50%;
        cursor: pointer;
        border: none;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
      }

      .music-info {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 5px;
      }

      .song-title {
        font-size: 12px;
        font-weight: 600;
        color: #fff;
        text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.3);
        white-space: nowrap;
        max-width: 120px;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .artist {
        font-size: 10px;
        color: rgba(255, 255, 255, 0.8);
        text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.3);
      }

      /* Responsive Music Player */
      @media (max-width: 768px) {
        .music-player {
          top: 10px;
          right: 10px;
          padding: 10px 15px;
          gap: 10px;
        }

        .song-title {
          max-width: 80px;
          font-size: 10px;
        }

        .artist {
          font-size: 8px;
        }

        .volume-slider {
          width: 40px;
        }
      }

      @media (max-width: 480px) {
        .music-player {
          top: 5px;
          right: 5px;
          padding: 8px 12px;
          gap: 8px;
        }

        .song-title {
          max-width: 60px;
          font-size: 9px;
        }

        .artist {
          font-size: 7px;
        }

        .volume-slider {
          width: 35px;
        }

        .music-btn {
          width: 35px;
          height: 35px;
          font-size: 20px;
        }
      }

      @media (max-width: 360px) {
        .music-player {
          padding: 6px 10px;
          gap: 6px;
        }

        .song-title {
          max-width: 50px;
          font-size: 8px;
        }

        .artist {
          font-size: 6px;
        }

        .volume-slider {
          width: 30px;
        }

        .music-btn {
          width: 30px;
          height: 30px;
          font-size: 18px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Floating Elements -->
    <div class="floating" style="left: 5%; font-size: 24px">❤️</div>
    <div class="floating" style="left: 15%; font-size: 28px">🌸</div>
    <div class="floating" style="left: 25%; font-size: 22px">💕</div>
    <div class="floating" style="left: 35%; font-size: 26px">🌹</div>
    <div class="floating" style="left: 45%; font-size: 24px">💖</div>
    <div class="floating" style="left: 55%; font-size: 30px">🌺</div>
    <div class="floating" style="left: 65%; font-size: 20px">💝</div>
    <div class="floating" style="left: 75%; font-size: 26px">🌷</div>
    <div class="floating" style="left: 85%; font-size: 22px">💗</div>
    <div class="floating" style="left: 10%; font-size: 32px">🌻</div>
    <div class="floating" style="left: 20%; font-size: 26px">💓</div>
    <div class="floating" style="left: 30%; font-size: 28px">🌼</div>
    <div class="floating" style="left: 40%; font-size: 24px">💘</div>
    <div class="floating" style="left: 50%; font-size: 30px">🌸</div>
    <div class="floating" style="left: 60%; font-size: 26px">💞</div>
    <div class="floating" style="left: 70%; font-size: 22px">🌺</div>
    <div class="floating" style="left: 80%; font-size: 28px">💟</div>
    <div class="floating" style="left: 90%; font-size: 24px">🌹</div>
    <div class="floating" style="left: 95%; font-size: 32px">💕</div>
    <div class="floating" style="left: 3%; font-size: 20px">⭐</div>
    <div class="floating" style="left: 7%; font-size: 26px">✨</div>
    <div class="floating" style="left: 13%; font-size: 24px">💫</div>
    <div class="floating" style="left: 17%; font-size: 30px">🌟</div>
    <div class="floating" style="left: 23%; font-size: 22px">💎</div>
    <div class="floating" style="left: 27%; font-size: 28px">🎀</div>
    <div class="floating" style="left: 33%; font-size: 24px">🎈</div>
    <div class="floating" style="left: 37%; font-size: 26px">🎉</div>
    <div class="floating" style="left: 43%; font-size: 30px">🎊</div>
    <div class="floating" style="left: 47%; font-size: 22px">🎋</div>
    <div class="floating" style="left: 53%; font-size: 28px">🎍</div>
    <div class="floating" style="left: 57%; font-size: 24px">🎎</div>
    <div class="floating" style="left: 63%; font-size: 26px">🎏</div>
    <div class="floating" style="left: 67%; font-size: 30px">🎐</div>
    <div class="floating" style="left: 73%; font-size: 22px">🎑</div>
    <div class="floating" style="left: 77%; font-size: 28px">🎀</div>
    <div class="floating" style="left: 83%; font-size: 24px">💎</div>
    <div class="floating" style="left: 87%; font-size: 26px">✨</div>
    <div class="floating" style="left: 93%; font-size: 30px">💫</div>
    <div class="floating" style="left: 97%; font-size: 22px">🌟</div>

    <!-- Music Player -->
    <div class="music-player">
      <div class="music-controls">
        <button class="music-btn" id="playPauseBtn">🎵</button>
      </div>

      <div class="volume-control">
        <span style="color: #fff; font-size: 16px">🔊</span>
        <input
          type="range"
          class="volume-slider"
          id="volumeSlider"
          min="0"
          max="100"
          value="50"
        />
      </div>

      <div class="music-info">
        <div class="song-title" id="songTitle">Sensiz Olmaz</div>
        <div class="artist" id="artist">🎵 Müziği başlat</div>
      </div>
    </div>

    <div class="container">
      <!-- Header -->
      <div class="header">
        <h1 class="main-title">KEŞKE SENİ TEBESSÜM ETTİREN HER ŞEY OLSAYDIM</h1>
        <p class="subtitle">Sevgili olmamız için kalan süre ❤️</p>
      </div>

      <!-- Countdown Section -->
      <div class="countdown-section">
        <h2 class="countdown-title">⏰ Geri Sayım Başladı</h2>
        <div class="countdown">
          <div class="unit">
            <div class="label">Gün</div>
            <div class="value" id="days">0</div>
          </div>
          <div class="unit">
            <div class="label">Saat</div>
            <div class="value" id="hours">00</div>
          </div>
          <div class="unit">
            <div class="label">Dakika</div>
            <div class="value" id="minutes">00</div>
          </div>
          <div class="unit">
            <div class="label">Saniye</div>
            <div class="value" id="seconds">00</div>
          </div>
        </div>
      </div>

      <!-- Map Section -->
      <div class="map-section">
        <h2 class="map-title">🗺️ Gaziantep'ten Konya Ereğli'ye Yolculuk</h2>
        <div class="map-container">
          <div id="map"></div>
        </div>
      </div>

      <!-- Footer -->
      <div class="footer">
        <div class="contact-info">💌 İletişim için:</div>
        <a href="tel:+905453970638" class="contact-link"
          >📞 +90 545 397 06 38</a
        >
      </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>
    <script>
      // --- Geri Sayım ---
      const targetDate =
        new Date("2025-08-27T17:30:00").getTime() + 364 * 24 * 60 * 60 * 1000;
      const daysEl = document.getElementById("days");
      const hoursEl = document.getElementById("hours");
      const minutesEl = document.getElementById("minutes");
      const secondsEl = document.getElementById("seconds");

      function updateCountdown() {
        const now = new Date().getTime();
        let diff = targetDate - now;
        if (diff < 0) diff = 0;

        const sec = Math.floor(diff / 1000);
        const d = Math.floor(sec / (24 * 3600));
        const h = Math.floor((sec % (24 * 3600)) / 3600);
        const m = Math.floor((sec % 3600) / 60);
        const s = sec % 60;

        daysEl.textContent = d;
        hoursEl.textContent = String(h).padStart(2, "0");
        minutesEl.textContent = String(m).padStart(2, "0");
        secondsEl.textContent = String(s).padStart(2, "0");
      }

      setInterval(updateCountdown, 1000);
      updateCountdown();

      // --- Harita ve Rota ---
      const map = L.map("map", {
        zoomControl: true,
        scrollWheelZoom: true,
        doubleClickZoom: true,
      }).setView([37.5, 35], 7);

      // Daha güzel harita stili
      L.tileLayer(
        "https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",
        {
          attribution: "&copy; OpenStreetMap contributors &copy; CARTO",
          subdomains: "abcd",
          maxZoom: 19,
        }
      ).addTo(map);

      // Gaziantep'ten Konya Ereğli'ye rota
      const start = L.latLng(37.0662, 37.3833); // Gaziantep
      const end = L.latLng(37.5326, 33.5176); // Konya Ereğli

      // Başlangıç ve bitiş noktaları için güzel ikonlar
      const startIcon = L.divIcon({
        className: "start-marker",
        html: `<div style="background: #4CAF50; width: 20px; height: 20px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.3);"></div>`,
        iconSize: [20, 20],
      });

      const endIcon = L.divIcon({
        className: "end-marker",
        html: `<div style="background: #FF5722; width: 20px; height: 20px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.3);"></div>`,
        iconSize: [20, 20],
      });

      // Başlangıç ve bitiş noktalarını ekle
      L.marker(start, { icon: startIcon })
        .addTo(map)
        .bindPopup("🚗 <b>Gaziantep</b><br>Yolculuk başlangıcı");
      L.marker(end, { icon: endIcon })
        .addTo(map)
        .bindPopup("🏁 <b>Konya Ereğli</b><br>Hedef nokta");

      // Rota kontrolü
      const routeControl = L.Routing.control({
        waypoints: [start, end],
        lineOptions: {
          styles: [
            {
              color: "#ff1493",
              weight: 6,
              opacity: 0.8,
            },
          ],
        },
        addWaypoints: false,
        draggableWaypoints: false,
        fitSelectedRoutes: true,
        createMarker: () => null,
        show: false,
        routeWhileDragging: false,
      }).addTo(map);

      // Araba animasyonu için güzel SVG ikon
      const carIcon = L.divIcon({
        className: "car-icon",
        html: `<svg width="40" height="24" viewBox="0 0 64 32" style="filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.5));">
        <defs>
          <linearGradient id="carGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#ff1493;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#ff69b4;stop-opacity:1" />
          </linearGradient>
        </defs>
        <rect x="4" y="12" width="56" height="16" rx="8" fill="url(#carGradient)" stroke="#fff" stroke-width="2"/>
        <rect x="8" y="8" width="48" height="8" rx="4" fill="url(#carGradient)" stroke="#fff" stroke-width="1"/>
        <circle cx="16" cy="28" r="6" fill="#333" stroke="#fff" stroke-width="2"/>
        <circle cx="48" cy="28" r="6" fill="#333" stroke="#fff" stroke-width="2"/>
        <circle cx="16" cy="28" r="3" fill="#fff"/>
        <circle cx="48" cy="28" r="3" fill="#fff"/>
        <rect x="20" y="14" width="24" height="6" rx="2" fill="rgba(255,255,255,0.3)"/>
      </svg>`,
        iconSize: [40, 24],
      });

      const carMarker = L.marker(start, { icon: carIcon }).addTo(map);
      let routeCoords = [];
      let currentIndex = 0;

      routeControl.on("routesfound", function (e) {
        routeCoords = e.routes[0].coordinates;
        currentIndex = 0;
      });

      // Araba animasyonu
      function animateCar() {
        if (routeCoords.length > 0) {
          currentIndex = (currentIndex + 1) % routeCoords.length;
          carMarker.setLatLng(routeCoords[currentIndex]);
        }
        requestAnimationFrame(animateCar);
      }

      // Rota yüklendikten sonra animasyonu başlat
      setTimeout(() => {
        animateCar();
      }, 2000);

      // Harita yüklendiğinde rota çizimini tetikle
      map.whenReady(() => {
        setTimeout(() => {
          routeControl.route();
        }, 1000);
      });

      // --- Müzik Sistemi ---
      const playPauseBtn = document.getElementById("playPauseBtn");
      const volumeSlider = document.getElementById("volumeSlider");
      const songTitle = document.getElementById("songTitle");
      const artist = document.getElementById("artist");

      // Tek şarkı - sürekli tekrar
      const song = {
        title: "Sensiz Olmaz",
        artist: "Yalın",
        url: "yalin.mp3", // Yerel ses dosyası
      };

      let isPlaying = false;
      let audio = new Audio();

      // Müzik çalma fonksiyonu
      function playMusic() {
        try {
          // Ses dosyasının yüklenip yüklenmediğini kontrol et
          if (!audio.src || audio.src === "") {
            audio.src = song.url;
          }

          audio.volume = volumeSlider.value / 100;
          audio.loop = true; // Sürekli tekrar

          // Müzik çalmayı dene
          audio
            .play()
            .then(() => {
              isPlaying = true;
              playPauseBtn.textContent = "⏸️";
              playPauseBtn.classList.add("playing");
              songTitle.textContent = song.title;
              artist.textContent = "Çalıyor...";
            })
            .catch((error) => {
              console.log("Müzik çalma hatası:", error.message);

              // Hata türüne göre farklı mesajlar
              if (error.name === "NotAllowedError") {
                artist.textContent = "Tarayıcı izni gerekli";
              } else if (error.name === "NotSupportedError") {
                artist.textContent = "Dosya formatı desteklenmiyor";
              } else if (error.name === "NetworkError") {
                artist.textContent = "Dosya bulunamadı";
              } else {
                artist.textContent = "Tekrar deneyin";
              }

              songTitle.textContent = song.title;
              playPauseBtn.textContent = "🎵";
              playPauseBtn.classList.remove("playing");
              isPlaying = false;
            });
        } catch (error) {
          console.log("Müzik sistemi hatası:", error.message);
          songTitle.textContent = song.title;
          artist.textContent = "Sistem hatası";
          playPauseBtn.textContent = "🎵";
          playPauseBtn.classList.remove("playing");
          isPlaying = false;
        }
      }

      // Müzik durdurma fonksiyonu
      function pauseMusic() {
        // Ses çalmayı durdur
        if (audio.src) {
          audio.pause();
        }

        isPlaying = false;
        playPauseBtn.textContent = "🎵";
        playPauseBtn.classList.remove("playing");
        artist.textContent = "Duraklatıldı";
      }

      // Play/Pause butonu tıklama
      playPauseBtn.addEventListener("click", () => {
        if (isPlaying) {
          pauseMusic();
        } else {
          playMusic();
        }
      });

      // Ses kontrolü
      volumeSlider.addEventListener("input", (e) => {
        audio.volume = e.target.value / 100;
      });

      // Müzik bittiğinde otomatik olarak tekrar başlat (ekstra güvenlik)
      audio.addEventListener("ended", () => {
        if (isPlaying) {
          audio.play();
        }
      });

      // Sayfa yüklendiğinde şarkı bilgisini göster
      window.addEventListener("load", () => {
        songTitle.textContent = song.title;
        artist.textContent = "Başlatmak için tıklayın";
      });

      // Müzik başlatma sistemi
      let musicInitialized = false;

      function initializeMusic() {
        if (musicInitialized) return;
        musicInitialized = true;

        // Müzik sistemini hazırla
        audio.src = song.url;
        audio.volume = volumeSlider.value / 100;
        audio.loop = true;

        // Ses dosyasının yüklenmesini bekle
        audio.addEventListener("canplaythrough", () => {
          songTitle.textContent = song.title;
          artist.textContent = "🎵 Müziği başlat";
          playPauseBtn.textContent = "🎵";
        });

        // Ses dosyası yüklenemezse
        audio.addEventListener("error", (e) => {
          console.log("Ses dosyası yüklenemedi:", e);
          songTitle.textContent = song.title;
          artist.textContent = "Dosya yüklenemedi";
          playPauseBtn.textContent = "❌";
        });

        // Kullanıcıya bilgi ver
        songTitle.textContent = song.title;
        artist.textContent = "Yükleniyor...";
        playPauseBtn.textContent = "⏳";
      }

      // Sayfa yüklendiğinde müzik sistemini hazırla
      window.addEventListener("load", () => {
        setTimeout(initializeMusic, 500);
      });

      // Kullanıcı etkileşimi ile müziği başlat
      function startMusicOnInteraction() {
        if (!isPlaying && audio.readyState >= 2) {
          // HAVE_CURRENT_DATA
          playMusic();
        }
        // Event listener'ları temizle
        document.removeEventListener("click", startMusicOnInteraction);
        document.removeEventListener("keydown", startMusicOnInteraction);
        document.removeEventListener("touchstart", startMusicOnInteraction);
      }

      // Farklı etkileşim türlerini dinle
      document.addEventListener("click", startMusicOnInteraction, {
        once: true,
      });
      document.addEventListener("keydown", startMusicOnInteraction, {
        once: true,
      });
      document.addEventListener("touchstart", startMusicOnInteraction, {
        once: true,
      });

      // Ses dosyası durumunu kontrol et
      audio.addEventListener("loadstart", () => {
        artist.textContent = "Yükleniyor...";
        playPauseBtn.textContent = "⏳";
      });

      audio.addEventListener("loadeddata", () => {
        artist.textContent = "🎵 Müziği başlat";
        playPauseBtn.textContent = "🎵";
      });
    </script>
  </body>
</html>
